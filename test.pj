map = f(arr, fn) {
	iter = f(arr, acc) {
		if(len(arr) == 0)  return acc;

		return iter(rest(arr), push(acc, fn(first(arr))));
	}
	return iter(arr, []);
}

filter = f(arr, fn) {
	iter = f(arr, acc) {
		if(len(arr) == 0)  return acc;
		if(fn(first(arr))) 
			return iter(rest(arr), push(acc, first(arr)));

		return iter(rest(arr), acc);
	}
	return iter(arr, []);
}

reduce = f(arr, init, fn) {
	def iter = f(arr, result) {
		if(len(arr) == 0) 
			return result;
		
		return iter(rest(arr), fn(result, first(arr)));
	}

	return iter(arr, init);
}

concat = f(arr1, arr2) {
	iter = f(result, arr) {
		if (len(arr) == 0) return result;
		return iter(push(result, first(arr)), rest(arr));
	}
	return iter(arr1, arr2);
}

zip = f(arr1, arr2) {
	iter = f(result, a1, a2) {
		if (len(a1) == 0) return result;
		if (len(a2) == 0) return result;
		return iter(push(result, [first(a1), first(a2)]), rest(a1), rest(a2));
	}
	return iter([], arr1, arr2);
}

take = f(n, arr) {
	if(n <= 0) return [] 
	if(len(arr) == 0) return [];
	return push(take(n - 1, rest(arr)), first(arr));
}

reverse = f(arr) {
  iter = f(result, a) {
    if (len(a) == 0) return result;
    return iter(push(result, first(a)), rest(a));
  }
  return iter([], arr);
}

sum = f(arr) => reduce(arr, 0, f(x, y) => x + y);


foo = 6;
nums = [1,2,3,4, 4 + 1, foo];
strs = ["1", "2", "3", "4", "5", "6"];

print("originals:", nums,", ",strs);
print("sum     :", sum(nums));
print("squared :", map(nums, f(x) => x ** 2));
print("filtered:", filter(nums, f(x) => x % 2 == 0));
print("zipped  :", zip(nums, strs));
print("concat  :", concat(nums, strs));
x = 5;
print(x)